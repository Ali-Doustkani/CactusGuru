<dx:DXWindow x:Class="CactusGuru.Presentation.View.Views.ImageGallary"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:dxb="http://schemas.devexpress.com/winfx/2008/xaml/bars"
             xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
             xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
             xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:intr="http://schemas.microsoft.com/expression/2010/interactivity"
             Title="گالری تصاویر"
             Height="600"
             Width="980"
             FlowDirection="RightToLeft"
             WindowStartupLocation="CenterScreen">
    <dx:DXWindow.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Styles.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </dx:DXWindow.Resources>
    <dx:DXWindow.DataContext>
        <Binding Source="{StaticResource vmLocator}" Path="ImageGallaryEditorViewModel" />
    </dx:DXWindow.DataContext>
    <intr:Interaction.Triggers>
        <intr:EventTrigger EventName="Loaded">
            <intr:InvokeCommandAction Command="{Binding LoadCommand}"/>
        </intr:EventTrigger>
        <intr:EventTrigger EventName="Unloaded">
            <intr:InvokeCommandAction Command="{Binding UnloadCommand}"/>
        </intr:EventTrigger>
    </intr:Interaction.Triggers>    
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <Grid FlowDirection="LeftToRight">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="300" />
                <ColumnDefinition />
            </Grid.ColumnDefinitions>
            <!-- Label -->
            <Grid Margin="10 0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="70" />
                    <ColumnDefinition Width="1" />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <TextBox Grid.ColumnSpan="2" Style="{StaticResource CodeStyle}" Text="{Binding Code}" />
                <Border Grid.Column="1" Style="{StaticResource SeparatorStyle}"/>
                <StackPanel Grid.Column="2" VerticalAlignment="Center">
                    <TextBlock Style="{StaticResource TitleStyle}" Text="{Binding Title}" />
                    <TextBlock Style="{StaticResource LocalityStyle}" Text="{Binding Locality}" />
                </StackPanel>
            </Grid>
            <!-- Toolbar -->
            <dxb:BarContainerControl Grid.Column="1" Style="{StaticResource ToolbarContainerStyle}">
                <dxb:ToolBarControl Style="{StaticResource ToolbarControlStyle}">
                    <dxb:BarButtonItem Content="ذخیره" Glyph="{StaticResource Save}" Command="{Binding SaveCommand}" />
                    <dxb:BarButtonItem Content="لغو" Glyph="{StaticResource Cancel}" Command="{Binding CancelCommand}" />
                    <dxb:BarItemSeparator />
                    <dxb:BarButtonItem Content="حذف" Glyph="{StaticResource Delete}" Command="{Binding DeleteImageCommand}" />
                    <dxb:BarButtonItem Content="درج تصویر" Glyph="{StaticResource Add}" BarItemDisplayMode="ContentAndGlyph" Command="{Binding AddImageCommand}" />
                    <dxb:BarItemSeparator />
                    <dxb:BarButtonItem Content="انتخاب" BarItemDisplayMode="Content" Command="{Binding SelectAllCommand}" />
                    <dxb:BarButtonItem Content="عدم انتخاب" BarItemDisplayMode="Content" Command="{Binding DeSelectAllCommand}" />
                    <dxb:BarButtonItem Content="پشیمان شدم" Glyph="{StaticResource Undo}" BarItemDisplayMode="ContentAndGlyph" Command="{Binding UndoCommand}" />
                    <dxb:BarItemSeparator />
                    <dxb:BarButtonItem Content="ذیخره ی فایل" Glyph="{StaticResource Jpeg}" BarItemDisplayMode="ContentAndGlyph" Command="{Binding SaveToFilesCommand}" />
                    <dxb:BarItemSeparator />
                    <dxb:BarButtonItem Content="ذخیره برای اینستاگرام" Glyph="{StaticResource Instagram}" BarItemDisplayMode="ContentAndGlyph" Command="{Binding SaveForInstagramCommand}" />
                </dxb:ToolBarControl>
            </dxb:BarContainerControl>
        </Grid>
        <!-- Content -->
        <dxg:GridControl Name="grid" Grid.Row="1" Style="{StaticResource GridStyle}" ItemsSource="{Binding Images}" SelectedItem="{Binding SelectedImage}">
            <dxg:GridControl.View>
                <dxg:CardView Style="{StaticResource CardViewStyle}"
                              FixedSize="280"
                              CardHeaderBinding="{Binding Path=Data.DateAddedTitle, RelativeSource={RelativeSource Self}}">
                    <dxg:CardView.CardTemplate>
                        <DataTemplate>
                            <Grid Width="200" Height="225">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="200" />
                                    <RowDefinition />
                                </Grid.RowDefinitions>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition />
                                    <ColumnDefinition Width="30" />
                                    <ColumnDefinition Width="30" />
                                    <ColumnDefinition Width="40" />
                                </Grid.ColumnDefinitions>
                                <dxe:ImageEdit Grid.ColumnSpan="4" IsReadOnly="True" EditValue="{Binding Row.Picture}" Stretch="Uniform" />
                                <Border Grid.ColumnSpan="4" Style="{StaticResource SelectedBorderStyle}"/>
                                <dxe:MemoEdit Grid.Row="1" Grid.Column="0" Text="{Binding Row.Description}" Style="{StaticResource MemoStyle}" />
                                <Button Grid.Row="1" Grid.Column="1" Margin="3 3 0 0" Click="DeleteButton_OnClick">
                                    <Image Source="{StaticResource Select}"/>
                                </Button>
                                <Button Grid.Row="1" Grid.Column="2" Margin="3 3 0 0" Click="ChangeDateButton_Click">D</Button>
                                <CheckBox Grid.Row="1" Grid.Column="3" Margin="3 3 0 0" IsChecked="{Binding Row.SharedOnInstagram}">Insta</CheckBox>
                            </Grid>
                        </DataTemplate>
                    </dxg:CardView.CardTemplate>
                </dxg:CardView>
            </dxg:GridControl.View>
            <dxg:GridControl.SortInfo>
                <dxg:GridSortInfo FieldName="DateAdded" />
            </dxg:GridControl.SortInfo>
        </dxg:GridControl>
    </Grid>
</dx:DXWindow>