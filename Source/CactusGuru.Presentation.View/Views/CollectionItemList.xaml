<DockPanel x:Class="CactusGuru.Presentation.View.Views.CollectionItemList"
           xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
           xmlns:intr="http://schemas.microsoft.com/expression/2010/interactivity"
           xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
           xmlns:local="clr-namespace:CactusGuru.Presentation.View.Views"
           xmlns:utils="clr-namespace:CactusGuru.Presentation.View.Utils">
    <DockPanel.Resources>
        <local:ViewModelLocator x:Key="vmLocator" />
        <utils:StringVisibilityConverter x:Key="stringVisConverter"/>
    </DockPanel.Resources>
    <DockPanel.DataContext>
        <Binding Source="{StaticResource vmLocator}" Path="CollectionItemListViewModel" />
    </DockPanel.DataContext>
    <intr:Interaction.Triggers>
        <intr:EventTrigger EventName="Loaded">
            <intr:InvokeCommandAction Command="{Binding LoadCommand}"/>
        </intr:EventTrigger>
        <intr:EventTrigger EventName="Unloaded">
            <intr:InvokeCommandAction Command="{Binding UnloadCommand}"/>
        </intr:EventTrigger>
    </intr:Interaction.Triggers>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <TextBox Text="{Binding CollectionItems.FilterText, UpdateSourceTrigger=PropertyChanged, Delay=400}" Margin="5" Padding="3" Width="250" HorizontalAlignment="Left"/>
        <ListBox Grid.Row="1" ItemsSource="{Binding CollectionItems}" SelectedItem="{Binding SelectedCollectionItem}" AlternationCount="2">
            <ListBox.ItemContainerStyle>
                <Style>
                    <Style.Triggers>
                        <Trigger Property="ListBox.AlternationIndex" Value="1">
                            <Setter Property="Control.Background" Value="#e9e9ea"/>
                        </Trigger>
                    </Style.Triggers>
                </Style>
            </ListBox.ItemContainerStyle>
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <Grid Height="35">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="40"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition Height="auto"/>
                        </Grid.RowDefinitions>
                        <TextBlock Grid.RowSpan="2" Text="{Binding Code}" FontSize="15" VerticalAlignment="Center" FontWeight="Bold" Margin="0 0 8 0"/>
                        <TextBlock Grid.Column="1" Text="{Binding Name}" FontSize="13" FontWeight="Bold" VerticalAlignment="Center"/>
                        <TextBlock Grid.Column="1" Grid.Row="1" Text="{Binding Info}" Visibility="{Binding Info, Converter={StaticResource stringVisConverter}}" FontSize="12"/>
                    </Grid>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </Grid>
   
    
    <!--<dxd:DockLayoutManager>
        <dxd:LayoutGroup Orientation="Vertical" ItemWidth="3*">
            <dxd:DocumentPanel ItemHeight="3*">
                <dxg:GridControl Name="grid"
                                 ShowBorder="False"
                                 ItemsSource="{Binding CollectionItems}"
                                 SelectedItem="{Binding SelectedCollectionItem}"
                                 ShowLoadingPanel="{Binding State.IsBusy}"
                                 IsEnabled="{Binding State.IsIdle}">
                    <dxg:GridControl.View>
                        <dxg:TableView AutoWidth="True"
                                       EditorButtonShowMode="ShowForFocusedRow"
                                       RowMinHeight="20"
                                       FlowDirection="LeftToRight"
                                       ShowSearchPanelMode="Always"
                                       SearchPanelHorizontalAlignment="Left"
                                       SearchPanelNullText="جست و جو بین گیاهان مجموعه"
                                       NavigationStyle="Row"
                                       ShowGroupPanel="False">
                            <dxg:TableView.RowCellMenuCustomizations>
                                <dxb:BarButtonItem Content="حذف" ItemClick="Delete_OnClick" />
                                <dxb:BarButtonItem Content="ویرایش" ItemClick="Edit_OnClick" />
                                <dxb:BarItemSeparator />
                                <dxb:BarButtonItem Content="کپی نام" ItemClick="Copy_OnItemClick" />
                                <dxb:BarItemSeparator />
                                <dxb:BarButtonItem Content="گالری تصاویر" ItemClick="GotoImageGallery_OnItemClick" />
                            </dxg:TableView.RowCellMenuCustomizations>
                        </dxg:TableView>
                    </dxg:GridControl.View>
                    <dxg:GridControl.Columns>
                        <dxg:GridColumn Header="کد" FieldName="Code" Width="20" AllowMoving="False" />
                        <dxg:GridColumn Header="نام" AllowMoving="False" FieldName="Name" />
                    </dxg:GridControl.Columns>
                </dxg:GridControl>
            </dxd:DocumentPanel>
        </dxd:LayoutGroup>
    </dxd:DockLayoutManager>-->
</DockPanel>
